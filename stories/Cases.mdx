import { Meta } from '@storybook/blocks';

import { SVGLayout } from './components';

<Meta title="Cases" />

# Overlapping cases resolution

Dynamic problem are mainly two:

- Resolve collisions (overlapping)
- Gravity

Both process are triggered by the dynamics.

The overlapping is is resolved using priority but some times it is difficult to
understand the different cases that we could face, here are some of them.

## Cases

All the cases are faced by normal items (black) and the pushed item (red). The
pushed item will always has a priority of `Infinity`.

### Overlapping between two items

The pushed item collide with the other two items and will be pushed down.

<SVGLayout layout={[
  {x: 0, y: 0, w: 2, h: 2, i: 1},
  {x: 1, y: 1, w: 2, h: 2, i: 2, priority: Infinity },
  {x: 0, y: 2, w: 2, h: 2, i: 3},
]} />
<SVGLayout layout={[
  {x: 0, y: 2, w: 2, h: 2, i: 1},
  {x: 1, y: 0, w: 2, h: 2, i: 2, priority: Infinity },
  {x: 0, y: 4, w: 2, h: 2, i: 3},
]} />

### Push elements with a gap over

<SVGLayout layout={[
  {x: 0, y: 0, w: 3, h: 2, i: 1},
  {x: 2, y: 0, w: 1, h: 5, i: 2, priority: Infinity },
  {x: 1, y: 2, w: 2, h: 2, i: 3},
  {x: 0, y: 5, w: 5, h: 1, i: 4},
]} />
<SVGLayout layout={[
  {x: 0, y: 5, w: 3, h: 2, i: 1},
  {x: 2, y: 0, w: 1, h: 5, i: 2, priority: Infinity },
  {x: 1, y: 7, w: 2, h: 2, i: 3},
  {x: 0, y: 9, w: 5, h: 1, i: 4},
]} />

## Glossary

- Priority: One item is prioritized to get more relevance to others on
  overlapping resolution, the dragged element will have always `Infinity`
  priority
- Support tree: Is a list of items that are supported by one item, so we will
  say the support tree of an item, for example: if we have several items one
  upon another an we said the support tree of the base element we are
  referencing the list of all elements support by this element and recursively
  until a gap or empty space
- Gap: A gap is defined as an empty space between two items
- Occupation matrix: Is a representation of the items layout using a grid and
  setting the id on each coordinates that are occupied by this item, in blank
  space are `null` values, for example:
  ```
  W1,   W1,   W1,   null, null
  W1,   W1,   W1,   null, null
  null, null, W2,   W2,   null
  null, null, W2,   W2,   null
  ```
